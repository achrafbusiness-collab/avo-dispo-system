{% extends "base.html" %}
{% block content %}
<div class="max-w-6xl mx-auto mt-6">
  <h1 class="text-2xl font-bold mb-6">ğŸ“¦ Auftrag bearbeiten â€“ #{{ order.id }}</h1>

  <form action="/orders/{{ order.id }}/update" method="post" class="space-y-8">

    <!-- Allgemeine Daten -->
    <div class="card p-6">
      <h2 class="text-lg font-semibold mb-4">Allgemein</h2>
      <div class="grid grid-cols-2 gap-4">
        <input name="mv_nr" placeholder="MV-Nr." value="{{ order.mv_nr or '' }}" class="border rounded p-2 w-full" />
        <input name="auftraggeber" placeholder="Auftraggeber" value="{{ order.auftraggeber or '' }}" class="border rounded p-2 w-full" />
        <input name="kennzeichen" placeholder="Kennzeichen" value="{{ order.kennzeichen or '' }}" class="border rounded p-2 w-full" />
        <input name="modell" placeholder="Modell" value="{{ order.modell or '' }}" class="border rounded p-2 w-full" />
        <input name="fin" placeholder="FIN" value="{{ order.fin or '' }}" class="border rounded p-2 w-full" />
      </div>
      <textarea name="infofeld" placeholder="Infofeld" class="border rounded p-2 w-full mt-4" rows="3">{{ order.infofeld or '' }}</textarea>
    </div>

    <!-- Abholung -->
    <div class="card p-6">
      <h2 class="text-lg font-semibold mb-4">Abholung</h2>
      <div class="grid grid-cols-2 gap-4">
        <input name="abhol_stadt" placeholder="Stadt" value="{{ order.abhol_stadt or '' }}" class="border rounded p-2" />
        <input name="abhol_plz" placeholder="PLZ" value="{{ order.abhol_plz or '' }}" class="border rounded p-2" />
        <input name="abhol_strasse" placeholder="StraÃŸe" value="{{ order.abhol_strasse or '' }}" class="border rounded p-2" />
        <input name="abhol_str_nr" placeholder="Nr." value="{{ order.abhol_str_nr or '' }}" class="border rounded p-2" />
        <input name="kontakt_abholung" placeholder="Kontakt" value="{{ order.kontakt_abholung or '' }}" class="border rounded p-2" />
        <input name="ap_abholung" placeholder="Ansprechpartner" value="{{ order.ap_abholung or '' }}" class="border rounded p-2" />
        <input name="abholdatum" placeholder="Datum" value="{{ order.abholdatum or '' }}" class="border rounded p-2" />
        <div class="flex gap-2">
          <input name="abhol_von" placeholder="von" value="{{ order.abhol_von or '' }}" class="border rounded p-2 w-full" />
          <input name="abhol_bis" placeholder="bis" value="{{ order.abhol_bis or '' }}" class="border rounded p-2 w-full" />
        </div>
      </div>
    </div>

    <!-- Anlieferung -->
    <div class="card p-6">
      <h2 class="text-lg font-semibold mb-4">Anlieferung</h2>
      <div class="grid grid-cols-2 gap-4">
        <input name="anliefer_stadt" placeholder="Stadt" value="{{ order.anliefer_stadt or '' }}" class="border rounded p-2" />
        <input name="anliefer_plz" placeholder="PLZ" value="{{ order.anliefer_plz or '' }}" class="border rounded p-2" />
        <input name="anliefer_strasse" placeholder="StraÃŸe" value="{{ order.anliefer_strasse or '' }}" class="border rounded p-2" />
        <input name="anliefer_str_nr" placeholder="Nr." value="{{ order.anliefer_str_nr or '' }}" class="border rounded p-2" />
        <input name="kontakt_anlieferung" placeholder="Kontakt" value="{{ order.kontakt_anlieferung or '' }}" class="border rounded p-2" />
        <input name="ap_anlieferung" placeholder="Ansprechpartner" value="{{ order.ap_anlieferung or '' }}" class="border rounded p-2" />
        <input name="anlieferdatum" placeholder="Datum" value="{{ order.anlieferdatum or '' }}" class="border rounded p-2" />
        <div class="flex gap-2">
          <input name="anliefer_von" placeholder="von" value="{{ order.anliefer_von or '' }}" class="border rounded p-2 w-full" />
          <input name="anliefer_bis" placeholder="bis" value="{{ order.anliefer_bis or '' }}" class="border rounded p-2 w-full" />
        </div>
      </div>
    </div>

    <!-- Disposition -->
    <div class="card p-6">
      <h2 class="text-lg font-semibold mb-4">Disposition</h2>
      <div class="grid grid-cols-3 gap-4">
        <input name="kilometer" placeholder="Kilometer" value="{{ order.kilometer or '' }}" class="border rounded p-2" />
        <input name="preis" placeholder="Preis Kunde (â‚¬)" value="{{ order.preis or '' }}" class="border rounded p-2" />
        <input name="preis_selbstst" placeholder="Preis Fahrer (â‚¬)" value="{{ order.preis_selbstst or '' }}" class="border rounded p-2" />
      </div>
      <div class="mt-4">
        <label class="block mb-1 font-medium">Fahrer / Auftragnehmer</label>
        <select name="fahrer_id" class="border rounded p-2 w-full">
          <option value="">â€” Kein Fahrer zugewiesen â€”</option>
          {% for f in drivers %}
          <option value="{{ f.id }}" {% if order.fahrer_id == f.id %}selected{% endif %}>
            {{ f.vorname }} {{ f.nachname }} ({{ f.firma or '' }})
          </option>
          {% endfor %}
        </select>
      </div>
    </div>

    <!-- Buttons -->
    <div class="flex justify-between mt-8">
      <a href="/orders/{{ order.id }}/delete" class="px-4 py-2 bg-red-500 text-white rounded hover:bg-red-600" 
         onclick="return confirm('Wirklich lÃ¶schen?')">ğŸ—‘ï¸ LÃ¶schen</a>
      <button class="px-6 py-2 bg-blue-600 text-white rounded hover:bg-blue-700">ğŸ’¾ Ã„nderungen speichern</button>
    </div>
  </form>
</div>
{% endblock %}
